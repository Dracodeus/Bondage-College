<!DOCTYPE html>
<html style="width:100%; height:100%; padding:0px; margin:0px;">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta charset="UTF-8">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<title>Bondage Club</title>
	<link rel="icon" type="image/png" href="Icons/Logo.png">
	<link rel="stylesheet" href="CSS/Styles.css">
</head>

<script src="Scripts/webgl/resources/m4.js"></script>
<script src="Scripts/GLDraw.js"></script>
<script src="Scripts/Common.js"></script>
<script src="Scripts/Drawing.js"></script>
<script src="Scripts/Timer.js"></script>
<script src="Scripts/AfkTimer.js"></script>
<script src="Scripts/GameLog.js"></script>
<script src="Scripts/Reputation.js"></script>
<script src="Scripts/Skill.js"></script>
<script src="Scripts/Character.js"></script>
<script src="Scripts/CharacterName.js"></script>
<script src="Scripts/ColorPicker.js"></script>
<script src="Scripts/Dialog.js"></script>
<script src="Scripts/Speech.js"></script>
<script src="Scripts/Text.js"></script>
<script src="Scripts/Inventory.js"></script>
<script src="Scripts/Import.js"></script>
<script src="Scripts/Asset.js"></script>
<script src="Scripts/Audio.js"></script>
<script src="Scripts/MiniGame.js"></script>
<script src="Scripts/NPC.js"></script>
<script src="Scripts/Server.js"></script>
<script src="Scripts/Element.js"></script>
<script src="Scripts/Translation.js"></script>
<script src="Scripts/Activity.js"></script>
<script src="Scripts/socket.io/socket.io.js"></script>
<script src="Assets/Female3DCG/Female3DCG.js"></script>
<script src="Screens/Character/Login/Login.js"></script>
<script src="Screens/Character/Appearance/Appearance.js"></script>
<script src="Screens/Character/Creation/Creation.js"></script>
<script src="Screens/Character/InformationSheet/InformationSheet.js"></script>
<script src="Screens/Character/OnlineProfile/OnlineProfile.js"></script>
<script src="Screens/Character/Preference/Preference.js"></script>
<script src="Screens/Character/Wardrobe/Wardrobe.js"></script>
<script src="Screens/Character/Cheat/Cheat.js"></script>
<script src="Screens/Character/PasswordReset/PasswordReset.js"></script>
<script src="Screens/Character/FriendList/FriendList.js"></script>
<script src="Screens/Character/Title/Title.js"></script>
<script src="Screens/Character/BackgroundSelection/BackgroundSelection.js"></script>
<script src="Screens/Character/Relog/Relog.js"></script>
<script src="Screens/Room/MainHall/MainHall.js"></script>
<script src="Screens/Room/Shop/Shop.js"></script>
<script src="Screens/Room/Introduction/Introduction.js"></script>
<script src="Screens/Room/MaidQuarters/MaidQuarters.js"></script>
<script src="Screens/Room/Shibari/Shibari.js"></script>
<script src="Screens/Room/Cell/Cell.js"></script>
<script src="Screens/Room/Empty/Empty.js"></script>
<script src="Screens/Room/KidnapLeague/KidnapLeague.js"></script>
<script src="Screens/Room/Private/Private.js"></script>
<script src="Screens/Room/Management/Management.js"></script>
<script src="Screens/Room/SlaveMarket/SlaveMarket.js"></script>
<script src="Screens/Room/Sarah/Sarah.js"></script>
<script src="Screens/Room/AsylumEntrance/AsylumEntrance.js"></script>
<script src="Screens/Room/AsylumBedroom/AsylumBedroom.js"></script>
<script src="Screens/Room/AsylumMeeting/AsylumMeeting.js"></script>
<script src="Screens/Room/AsylumTherapy/AsylumTherapy.js"></script>
<script src="Screens/Room/CollegeEntrance/CollegeEntrance.js"></script>
<script src="Screens/Room/CollegeTennis/CollegeTennis.js"></script>
<script src="Screens/Room/CollegeCafeteria/CollegeCafeteria.js"></script>
<script src="Screens/Room/CollegeTheater/CollegeTheater.js"></script>
<script src="Screens/Room/CollegeDetention/CollegeDetention.js"></script>
<script src="Screens/Room/CollegeTeacher/CollegeTeacher.js"></script>
<script src="Screens/Room/LARP/LARP.js"></script>
<script src="Screens/Room/Gambling/Gambling.js"></script>
<script src="Screens/Room/Prison/Prison.js"></script>
<script src="Screens/Room/Photographic/Photographic.js"></script>
<script src="Screens/Room/Stable/Stable.js"></script>
<script src="Screens/Room/Magic/Magic.js"></script>
<script src="Screens/Room/Nursery/Nursery.js"></script>
<script src="Screens/Room/Cafe/Cafe.js"></script>
<script src="Screens/MiniGame/HorseWalk/HorseWalk.js"></script>
<script src="Screens/MiniGame/Kidnap/Kidnap.js"></script>
<script src="Screens/MiniGame/MaidDrinks/MaidDrinks.js"></script>
<script src="Screens/MiniGame/MaidCleaning/MaidCleaning.js"></script>
<script src="Screens/MiniGame/SlaveAuction/SlaveAuction.js"></script>
<script src="Screens/MiniGame/RhythmGame/RhythmGame.js"></script>
<script src="Screens/MiniGame/Therapy/Therapy.js"></script>
<script src="Screens/MiniGame/Tennis/Tennis.js"></script>
<script src="Screens/Cutscene/PlayerCollaring/PlayerCollaring.js"></script>
<script src="Screens/Cutscene/PlayerMistress/PlayerMistress.js"></script>
<script src="Screens/Cutscene/NPCCollaring/NPCCollaring.js"></script>
<script src="Screens/Cutscene/NPCSlaveAuction/NPCSlaveAuction.js"></script>
<script src="Screens/Cutscene/SarahIntro/SarahIntro.js"></script>
<script src="Screens/Online/ChatSearch/ChatSearch.js"></script>
<script src="Screens/Online/ChatCreate/ChatCreate.js"></script>
<script src="Screens/Online/ChatRoom/ChatRoom.js"></script>
<script src="Screens/Online/ChatAdmin/ChatAdmin.js"></script>
<script src="Screens/Online/GameLARP/GameLARP.js"></script>
<script src="Screens/Inventory/ItemMouth/PumpGag/PumpGag.js"></script>
<script src="Screens/Inventory/ItemVulva/VibratingEgg/VibratingEgg.js"></script>
<script src="Screens/Inventory/ItemVulva/VibratingLatexPanties/VibratingLatexPanties.js"></script>
<script src="Screens/Inventory/ItemVulva/WandBelt/WandBelt.js"></script>
<script src="Screens/Inventory/ItemNipples/VibeNippleClamp/VibeNippleClamp.js"></script>
<script src="Screens/Inventory/ItemNipplesPiercings/VibeHeartPiercings/VibeHeartPiercings.js"></script>
<script src="Screens/Inventory/ItemVulvaPiercings/VibeHeartClitPiercing/VibeHeartClitPiercing.js"></script>
<script src="Screens/Inventory/ItemVulvaPiercings/TapedClitEgg/TapedClitEgg.js"></script>
<script src="Screens/Inventory/ItemButt/ButtPump/ButtPump.js"></script>
<script src="Screens/Inventory/ItemNeck/ShockCollar/ShockCollar.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarShockUnit/CollarShockUnit.js"></script>
<script src="Screens/Inventory/ItemArms/HempRope/HempRope.js"></script>
<script src="Screens/Inventory/ItemArms/LeatherCuffs/LeatherCuffs.js"></script>
<script src="Screens/Inventory/ItemArms/StraitJacket/StraitJacket.js"></script>
<script src="Screens/Inventory/ItemArms/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemArms/Chains/Chains.js"></script>
<script src="Screens/Inventory/ItemArms/MermaidSuit/MermaidSuit.js"></script>
<script src="Screens/Inventory/ItemHands/PaddedMittens/PaddedMittens.js"></script>
<script src="Screens/Inventory/ItemHands/PawMittens/PawMittens.js"></script>
<script src="Screens/Inventory/ItemMouth/ClothGag/ClothGag.js"></script>
<script src="Screens/Inventory/ItemMouth2/ClothGag/ClothGag.js"></script>
<script src="Screens/Inventory/ItemMouth3/ClothGag/ClothGag.js"></script>
<script src="Screens/Inventory/ItemMouth/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemMouth2/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemMouth3/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemMisc/MetalPadlock/MetalPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/IntricatePadlock/IntricatePadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/TimerPadlock/TimerPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/MistressTimerPadlock/MistressTimerPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/OwnerTimerPadlock/OwnerTimerPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/OwnerPadlock/OwnerPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/LoversPadlock/LoversPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/LoversTimerPadlock/LoversTimerPadlock.js"></script>
<script src="Screens/Inventory/ItemMisc/MistressPadlock/MistressPadlock.js"></script>
<script src="Screens/Inventory/ItemHead/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemMouth/PlugGag/PlugGag.js"></script>
<script src="Screens/Inventory/ItemMouth/DildoPlugGag/DildoPlugGag.js"></script>
<script src="Screens/Inventory/ItemHands/SpankingToys/SpankingToy.js"></script>
<script src="Screens/Inventory/ItemTorso/HempRopeHarness/HempRopeHarness.js"></script>
<script src="Screens/Inventory/ItemTorso/NylonRopeHarness/NylonRopeHarness.js"></script>
<script src="Screens/Inventory/ItemFeet/HempRope/HempRope.js"></script>
<script src="Screens/Inventory/ItemFeet/Chains/Chains.js"></script>
<script src="Screens/Inventory/ItemLegs/HempRope/HempRope.js"></script>
<script src="Screens/Inventory/ItemLegs/Chains/Chains.js"></script>
<script src="Screens/Inventory/ItemPelvis/LoveChastityBelt/LoveChastityBelt.js"></script>
<script src="Screens/Inventory/ItemLegs/LeatherLegCuffs/LeatherLegCuffs.js"></script>
<script src="Screens/Inventory/ItemFeet/LeatherAnkleCuffs/LeatherAnkleCuffs.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarNameTag/CollarNameTag.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarNameTagOval/CollarNameTagOval.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarNameTagPet/CollarNameTagPet.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarNameTagLover/CollarNameTagLover.js"></script>
<script src="Screens/Inventory/ItemNeckAccessories/CollarNameTagLivestock/CollarNameTagLivestock.js"></script>
<script src="Screens/Inventory/ItemLegs/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemFeet/DuctTape/DuctTape.js"></script>
<script src="Screens/Inventory/ItemNeck/SlaveCollar/SlaveCollar.js"></script>
<script src="Screens/Inventory/ItemVulva/VibratingDildo/VibratingDildo.js"></script>
<script src="Screens/Inventory/ItemVulva/ClitoralStimulator/ClitoralStimulator.js"></script>
<script src="Screens/Inventory/ItemButt/VibratingButtplug/VibratingButtplug.js"></script>
<script src="Screens/Inventory/ItemNipples/TapedVibeEggs/TapedVibeEggs.js"></script>
<script src="Screens/Inventory/ItemNipples/NippleSuctionCups/NippleSuctionCups.js"></script>
<script src="Screens/Inventory/ItemVulva/ClitSuctionCup/ClitSuctionCup.js"></script>
<script src="Screens/Inventory/ItemVulva/InflatableVibeDildo/InflatableVibeDildo.js"></script>
<script src="Screens/Inventory/ItemButt/InflVibeButtPlug/InflVibeButtPlug.js"></script>
<script src="Screens/Inventory/ItemDevices/TeddyBear/TeddyBear.js"></script>
<script src="Screens/Inventory/ItemArms/LeatherStraitJacket/LeatherStraitJacket.js"></script>
<script src="Screens/Inventory/ItemArms/CollarCuffs/CollarCuffs.js"></script>
<script src="Screens/Inventory/ItemDevices/InflatableBodyBag/InflatableBodyBag.js"></script>
<script src="Screens/Inventory/ItemArms/WristShackles/WristShackles.js"></script>
<script src="Screens/Inventory/ItemEars/HeadphoneEarPlugs/HeadphoneEarPlugs.js"></script>
<script src="Screens/Inventory/ItemArms/SturdyLeatherBelts/SturdyLeatherBelts.js"></script>
<script src="Screens/Inventory/ItemLegs/SturdyLeatherBelts/SturdyLeatherBelts.js"></script>
<script src="Screens/Inventory/ItemFeet/SturdyLeatherBelts/SturdyLeatherBelts.js"></script>
<script src="Screens/Inventory/ItemNipplesPiercings/RoundPiercing/RoundPiercing.js"></script>
<script src="Screens/Inventory/ItemNipplesPiercings/WeightedPiercing/WeightedPiercing.js"></script>
<script src="Screens/Inventory/ItemDevices/Sybian/Sybian.js"></script>
<script src="Screens/Inventory/ItemDevices/SmallWoodenBoxOpenHead/SmallWoodenBoxOpenHead.js"></script>
<script src="Screens/Inventory/ItemDevices/WoodenBoxOpenHead/WoodenBoxOpenHead.js"></script>
<script src="Screens/Inventory/ItemDevices/BondageBench/BondageBench.js"></script>
<script src="Screens/Inventory/ItemAddon/BondageBenchStraps/BondageBenchStraps.js"></script>
<script src="Screens/Inventory/ItemButt/AnalHook/AnalHook.js"></script>
<script src="Screens/Inventory/ItemButt/AnalBeads2/AnalBeads2.js"></script>
<script src="Screens/Inventory/ItemButt/ButtPlugLock/ButtPlugLock.js"></script>
<script src="Screens/Inventory/ItemArms/OrnateCuffs/OrnateCuffs.js"></script>
<script src="Screens/Inventory/ItemLegs/OrnateLegCuffs/OrnateLegCuffs.js"></script>
<script src="Screens/Inventory/ItemFeet/OrnateAnkleCuffs/OrnateAnkleCuffs.js"></script>
<script src="Screens/Inventory/ItemArms/FullLatexSuit/FullLatexSuit.js"></script>
<script src="Screens/Inventory/ItemVulva/FullLatexSuitWand/FullLatexSuitWand.js"></script>
<script src="Screens/Inventory/ItemArms/LeatherArmbinder/LeatherArmbinder.js"></script>
<script src="Screens/Inventory/ItemHidden/LeatherArmbinderStrap/LeatherArmbinderStrap.js"></script>
<script src="Screens/Inventory/ItemHidden/LeatherArmbinderWrapStrap/LeatherArmbinderWrapStrap.js"></script>
<script src="Screens/Inventory/ItemArms/BitchSuit/BitchSuit.js"></script>
<script src="Screens/Inventory/ItemVulva/ClitAndDildoVibratorbelt/ClitAndDildoVibratorbelt.js"></script>
<script>

/*

	NEXT VERISON:
	
	BUG SENT - Both egg and vibrator could work on different variables - Demon tail + Clit&Dildo Vibrating belt + See-through + See-through zip catsuits (gatetrek)
	BUG SENT - Use a device strap-on on a suspended girl, should be hidden (wildsj)
	BUG - Vibrating wand shows over wedding dress
	
	OK - Seam & Opacity fixes for suits (Atasly)
	OK - Fixes for the All-Four position (Gatetrek)
	OK - Admiral suit & Crotch chain fixes (Kirsty)
	OK - Gloves & Taped Hands fixes (CthulhuDancing)

	OK - Validate improper item properties (Sekkmer)
	OK - New button to clear all expressions (Sekkmer)
	OK - HobbleSkirt fixes & lots of assets priority fixes (Atasly)
	OK - Remove collar accessory with collar in kidnap mini-game (elliesec)
	
	OK - Remove the TailStrap physical zone (Sekkmer)
	OK - New setting to only play sound if the player is involved (Atasly)
	OK - Chat room entry/leave room refresh correction (Sekkmer)
	OK - Yes, average speed is now faster - Optimization for DrawGL (Sekkmer)
			
IN PROGRESS - Build a new room with an NPC to explain how the LARP system and Bondage Battles works:
-	Every girl must follow the LARP rules and play fair.  When they lose a battle, they need to submit and go along with it.
-	Every girl needs to select a class to play in the LARP.  Each class can use the strip and restrain abilities and has three special abilities that can be used only once per battle, listed below.
-	Can join Bondage Battles from that new room.  Bondage Battle rooms are like regular chat rooms where you can chat and emote but cannot restrain until the battle is over.
-	Before the fight, each girl in the Bondage Battle room must select a team/color or be an observer.  The battle can be a free-for-all if everyone selects a different team/color.
-	Once everyone has selected a team and clicked on “Ready”, the battle begins.
-	Each girl act when her turn comes, the turn order is random, picked by the server.  Once every girl has acted, we start again with the reversed turn order.
-	When a girl turn begins, she must select an ability to do and a target.  If the ability works (see the ability description), the target gets stripped, restrained, etc.
-	A girl cannot act if her arms or hands are restrained, her turn is skipped automatically.
-	If only one team can act, the fight is over, the winners are announced, and the rooms come back to normal.  The winners can enjoy their spoils of war normally.

Here are the abilities that everyone can use, all the time:
Strip: Can only be used if the target is clothed (upper cloth slot is checked).  The odds of successfully striping is: 50% + player offensive bonus - target defensive bonus.  The random % is rolled on the server.  If the % succeeds, the target is stripped to her underwear.
Restrain: Can only be used if the target isn’t clothed.  The odds of successfully restraining is: 50% + player offensive bonus - target defensive bonus.  The random % is rolled on the server.  If the % succeeds, the player can apply a restrain on target zone: Legs/Thighs or Head/Mouth.  If the zones are already restrained, apply a restraint on Arms/Hands to prevent that target from acting, removing her from the game.

Matron (Offensive bonus: 30%, Defensive bonus: 0%)
Control: Nobody can use any special ability until your next turn.  Must be able to talk.
Detain: Regular restrain ability, but you automatically win the %.
Charge: Everyone in your team gets a +30% offensive bonus until your next turn.  Must be able to walk.  This bonus can raise/lower the odds to 100% or 0%.

Seducer (Offensive bonus: 20%, Defensive bonus: 10%)
Seduce: Target girl skips her next turn, must be able to talk.
Expose: Regular strip ability, but you automatically win the %.
Inspire: Target girl can use her three special abilities once again.

Trickster (Offensive bonus: 20%, Defensive bonus: 10%)
Hide: Cannot be targeted by anyone until your next turn, must be able to walk.
Confuse: Target girl loses all class bonuses and cannot use special abilities until your next turn, must be able to talk.
Gamble:  The server rolls 50% odds:
-	If you win, you get released from all restrains
-	If you lose, you get fully bound at random and are out of the game

Servant (Offensive bonus: 10%, Defensive bonus: 20%)
Rescue: Remove a restraint from any girl, must be able to walk.
Yield: Skip your turn and give it to a target.
Support: Everyone in your team gets a +30% defensive bonus until your next turn.  Must be able to talk.  This bonus can raise/lower the odds to 100% or 0%.

Artist (Offensive bonus: 10%, Defensive bonus: 20%)
Evasion: Can remove a restraint from yourself.
Cheer: Target girl gets an extra +30% offensive and defensive bonus until your next turn, must be able to talk.  This bonus can raise/lower the odds to 100% or 0%.
Costume: Target girl dress back up, must be able to walk.

Protector (Offensive bonus: 0%, Defensive bonus: 30%)
Dress: You dress back up.
Cover: Target girl cannot be targeted by anyone until your next turn, must be able to walk.
Sacrifice: Nobody in your team can be targeted but you, until your next turn.

	TO DO - Each restraint will have different ways (mini-games) to try to struggle out of it:
		1. Go Berserk (Duct Tape, Cages & Boxes, Mittens, Chastity Items, Body Harnesses, Gags with harness, Hoods) - Click the circles quickly before they disappear (Asylum)
		2. Use Strength (Duct Tape, Yokes, Cuffs & Manacles, Belts, One Bar & Bench & Bag, Armbinders, Gags without harness) - Key Speed Game: A + S (Current)
		3. Be Clever (Rope, Yokes, Cages & Boxes, Cuffs & Manacles, Locking Boots, Collars) - Memory Game: Simon Says
		4. Use Dexterity (Rope, Jackets & Suits, One Bar & Bench & Bag, Mittens, Body Harnesses, Gags with harness, Collars) - Timing Game: Stop the moving object at the right position
		5. Be Supple (Jackets & Suits, Belts, Chastity Items, Gags without harness, Armbinders, Locking Boots, Hoods) - Guess the right number between 1 and 100, a few tries, tells you if higher or lower	
		6. Pick the Lock (For anything that locks or when a lock is added) - Precision Game - Don't touch the walls that are scrolling toward you
		
	TO DO - Proof Read
	TO DO - Patreon Import/Update

*/

// When the code is loaded, we start the game engine
window.onload = function() {
	//CheatImport();
	//ServerURL = "https://bondage-club-server.herokuapp.com/";
	CommonIsMobile = CommonDetectMobile();
	TranslationLoad();
	DrawLoad();
	AssetLoadAll();
	CommonSetScreen("Character", "Login");
	ServerInit();
	MainRun(0);
};

// Main game running state, runs the drawing
function MainRun(Timestamp) {
	DrawProcess();
	TimerProcess(Timestamp);
}

// When the user presses a key, we send the KeyDown event to the current screen if it can accept it
function KeyDown(event) {
	if (event.repeat) return;
	KeyPress = event.keyCode || event.which;
	CommonKeyDown();
}

function DocumentKeyDown(event) {
	if (event.repeat) return;
	if (event.key == "Escape") {
		if (typeof window[CurrentScreen + "Exit"] === "function") {
			window[CurrentScreen + "Exit"]();
		} else if ((CurrentCharacter != null) && Array.isArray(DialogMenuButton) && (DialogMenuButton.indexOf("Exit") >= 0)) {
			DialogLeaveItemMenu();
		} else if ((CurrentCharacter != null) && (CurrentScreen == "ChatRoom")) {
			DialogLeave();
		}
	}
}

// When the user clicks, we fire the click event for other screens
function Click(event) {
	if (!CommonIsMobile) {
		MouseMove(event);
		CommonClick();
	}
}

// When the user touches the screen (mobile only), we fire the click event for other screens
function Touch(event) {
	if (CommonIsMobile) {
		var rect = document.getElementById("MainCanvas").getBoundingClientRect();
		if (document.body.clientWidth <= document.body.clientHeight * 2) {
			MouseX = Math.round((event.touches[0].clientX - rect.left) * 2000 / document.body.clientWidth);
			MouseY = Math.round((event.touches[0].clientY - rect.top) * 2000 / document.body.clientWidth);
		} else {
			MouseX = Math.round((event.touches[0].clientX - rect.left) * 1000 / document.body.clientHeight);
			MouseY = Math.round((event.touches[0].clientY - rect.top) * 1000 / document.body.clientHeight);
		}		
		CommonClick();
	} 
}

// When mouse move, we keep the mouse position for other scripts
function MouseMove(event) {
	var rect = document.getElementById("MainCanvas").getBoundingClientRect();
	if (document.body.clientWidth <= document.body.clientHeight * 2) {
		MouseX = Math.round((event.clientX - rect.left) * 2000 / document.body.clientWidth);
		MouseY = Math.round((event.clientY - rect.top) * 2000 / document.body.clientWidth);
	} else {
		MouseX = Math.round((event.clientX - rect.left) * 1000 / document.body.clientHeight);
		MouseY = Math.round((event.clientY - rect.top) * 1000 / document.body.clientHeight);
	}
}

// When the mouse is away from the control, we stop keeping the coordinates, we also check for false positives with "relatedTarget"
function LoseFocus(event) {
	if (event.relatedTarget || event.toElement) {
		MouseX = -1;
		MouseY = -1;
	}
}
 
</script>

<body style="width:100%; height:100%; background-color:black; margin:0px; padding:0px; overflow:hidden;">
	<canvas id="MainCanvas" Width="2000" Height="1000" onClick="Click(event);" onTouchStart="Touch(event);" onMouseMove="MouseMove(event);" onMouseLeave="LoseFocus(event);"></canvas>
</body>
</html>
